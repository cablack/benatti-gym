function openDemo(i){
  const ex = state.biblioteca[i];
  if(!ex) return;

  byId('modalTitle').textContent = ex.nome;

  // Mostra spinner inicial
  byId('modalContent').innerHTML = `
    <div class="loading"></div>
    <p class="small" style="text-align: center; margin-top: 10px;">Carregando vídeo...</p>
  `;
  byId('modal').classList.add('open');

  // Cria elemento de vídeo
  const video = document.createElement('video');
  video.controls = true;
  video.playsInline = true;
  video.muted = true;  // necessário no mobile p/ autoplay
  video.style.width = '100%';
  video.style.maxHeight = '70vh';

  const source = document.createElement('source');
  source.src = ex.video;
  source.type = 'video/mp4';
  video.appendChild(source);

  // Quando o vídeo puder começar a tocar
  video.addEventListener('canplay', function() {
    byId('modalContent').innerHTML = '';
    byId('modalContent').appendChild(video);

    // tenta autoplay
    video.play().catch(() => {
      console.log('Autoplay bloqueado, mostrando controles');
    });
  });

  // Timeout de fallback (5s)
  setTimeout(() => {
    if (byId('modalContent').querySelector('.loading')) {
      byId('modalContent').innerHTML = '';
      byId('modalContent').appendChild(video);
    }
  }, 5000);

  // Tratamento de erro
  video.addEventListener('error', function() {
    byId('modalContent').innerHTML = `
      <div class="error-msg">
        <p>Erro ao carregar o vídeo.</p>
        <p>Verifique sua conexão ou tente novamente.</p>
      </div>
    `;
  });

  // dispara carregamento
  video.load();
}
